{% macro event(loop, event, general_location) -%}
<div style="margin-left: 20px">
    {%- if loop.first or loop.previtem.start_time != event.start_time or loop.previtem.end_time != event.end_time %}
        <p> {{ event.start_time.strftime('%H:%M') }}-{{ event.end_time.strftime('%H:%M') }} </p>
    {%- endif %}
    {%- if loop.first or loop.previtem.subject_name != event.subject_name %}
        <div>
            <p> {{ event.subject_format }} </p>
            <p> {{ "<s>" * event.is_canceled }}{{ event.subject_name }}{{ "</s>" * event.is_canceled }} </p>
        </div>
    {%- endif %}
    <div style="margin-left: 20px">
        <p>{{ event.contingent }}</p>
        <p>{% if general_location %} Каб.{% endif %} {{ event.location }}</p>
    </div>
</div>
{%- endmacro %}